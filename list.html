<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="format-detection" content="telephone=no">
    <meta name="viewport" content="width=device-width">
    <title>Manage Files</title>
    <style>
html { max-width: 70ch; padding: 2ch; margin: auto; color: #111; background-color: #ffe; }
body { hyphens: auto; }
form { width: 100%; }
    </style>
  </head>
  <body lang="en">
    <header>
      <a href="#main">Skip navigation</a>
      <a href="/view/index">Home</a>
      <a href="/archive/{{.Dir}}data.zip" accesskey="z">Zip</a>
      <a href="/upload/{{.Dir}}?filename=image-1.jpg" accesskey="u">Upload</a>
      <form role="search" action="/search/{{.Dir}}" method="GET">
        <label for="search">Search:</label>
        <input id="search" type="text" spellcheck="false" name="q" accesskey="f" placeholder="term #tag title:term blog:true" required>
        <button>Go</button>
      </form>
    </header>
    <main>
      <h1>Manage Files</h1>
      <form id="manage" method="POST">
        <p><mark>Deletions are immediate and there is no undo!</mark></p>
        <table>
          <tr>
            <th>Name</th>
            <th>Title</th>
            <th>Action</th>
          </tr>
          {{range .Files}}
          <tr>
            {{if .IsDir}}
            <td><a href="/list/{{$.Dir}}{{.Name}}">{{.Name}}</a></td>
            {{else}}
            <td><a href="/view/{{$.Dir}}{{.Name}}">{{.Name}}</a></td>
            {{end}}
            <td>{{.Title}}</td>
            <td>{{if .IsUp}}{{else}}<button formaction="/delete/{{$.Dir}}{{.Name}}">Delete</button>{{end}}</td>
          </tr>
          {{end}}
        </table>
      </form>
    </main>
  </body>
</html>
