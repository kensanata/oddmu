.\" Generated by scdoc 1.11.3
.\" Complete documentation for this program is not available as a GNU info page
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.nh
.ad l
.\" Begin generated content:
.TH "ODDMU-RELEASES" "7" "2025-02-09"
.PP
.SH NAME
.PP
oddmu-releases - what'\&s new?\&
.PP
.SH DESCRIPTION
.PP
This page lists user-visible features and template changes to consider.\&
.PP
.SS 1.15 (2025)
.PP
Fix the hashtag detection.\& This was necessary to cut down on the many false
positives.\& They were most obvious with the \fIhashtags\fR subcommand.\& Now the
Markdown parser is used at startup to index the pages, making startup slower
(about twice as long with my blog).\& The Markdown parser is also used to parse
search terms (where it makes little difference).\&
.PP
Fix the timestamp for backup files.\& This was necessary because the diff didn'\&t
work as intended.\&
.PP
.SS 1.14 (2024)
.PP
Add \fIlist\fR, \fIdelete\fR and \fIrename\fR actions.\&
.PP
This requires a change to your web server setup if you are using a it as a
reverse proxy because you need to pass these new actions along to Oddmu,
together with appropriate permission checks.\&
.PP
See \fIoddmu-apache\fR(5) or \fIoddmu-nginx\fR(5) for example.\&
.PP
In addition to that, you might want a link to the \fIlist\fR action from one of the
existing templates.\& For example, from upload.\&html:
.PP
.nf
.RS 4
<p>You can rename and delete files <a href="/list/{{\&.Dir}}">from the file list</a>\&.
.fi
.RE
.PP
The following line was added to the "preview.\&html" and "edit.\&html" template:
.PP
.nf
.RS 4
<base href="/view/{{\&.Dir}}">
.fi
.RE
.PP
You might want to do that as well, if you have your own.\& Without this, links in
the preview cannot be followed as they all point to \fB/preview\fR instead of
\fB/view\fR and the link to the list of changes cannot be followed from the edit
page: it leads to editing the list of changes.\&
.PP
.SS 1.13 (2024)
.PP
Add \fIexport\fR subcommand.\&
.PP
.SS 1.12 (2024)
.PP
Add \fIhashtags\fR, \fIlinks\fR and \fItoc\fR subcommands.\&
.PP
Support searching for multiple words using all sorts of quotation marks.\& That
means that it is now impossible to search for words that begin with such a
quotation mark.\&
.PP
These are the quotation marks currently supported: '\&foo'\& "foo" ‘foo’ ‚foo‘ ’foo’
“foo” „foo“ ”foo” «foo» »foo« ‹foo› ›foo‹ ｢foo｣ 「ｆｏｏ」 『ｆｏｏ』 – any such
quoted text is searched as-is, including whitespace.\&
.PP
Add loading="lazy" for images in search.\&html
.PP
If you want to take advantage of this, you'\&ll need to adapt your "search.\&html"
template accordingly.\& Use like this, for example:
.PP
.nf
.RS 4
{{range \&.Items}}
<article lang="{{\&.Language}}">
  <p><a class="result" href="/view/{{\&.Name}}">{{\&.Title}}</a>
    <span class="score">{{\&.Score}}</span></p>
  <blockquote>{{\&.Html}}</blockquote>
  {{range \&.Images}}
  <p class="image"><a href="/view/{{\&.Name}}"><img loading="lazy" src="/view/{{\&.Name}}"></a><br/>{{\&.Html}}
  {{end}}
</article>
{{end}}
.fi
.RE
.PP
.SS 1.11 (2024)
.PP
The HTML renderer option for smart fractions support was removed.\& Therefore, 1/8
no longer turns into ⅛ or ¹⁄₈.\& The benefit is that something like "doi:
10.\&1017/9781009157926.\&007" doesn'\&t turn into "doi: 10.\&1017⁄9781009157926.\&007".\&
If you need to change this, take a look at the \fIwikiRenderer\fR function.\&
.PP
When search terms (excluding hashtags) match the alt text given for an image,
that image is part of the data available to the search template.\&
.PP
If you want to take advantage of this, you'\&ll need to adapt your "search.\&html"
template accordingly.\& Use like this, for example:
.PP
.nf
.RS 4
{{range \&.Items}}
<article lang="{{\&.Language}}">
  <p><a class="result" href="/view/{{\&.Name}}">{{\&.Title}}</a>
    <span class="score">{{\&.Score}}</span></p>
  <blockquote>{{\&.Html}}</blockquote>
  {{range \&.Images}}
  <p class="image"><a href="/view/{{\&.Name}}"><img class="last" src="/view/{{\&.Name}}"></a><br/>{{\&.Html}}
  {{end}}
</article>
{{end}}
.fi
.RE
.PP
.SS 1.10 (2024)
.PP
You can now preview edits instead of saving them.\&
.PP
.PD 0
.IP \(bu 4
a preview button was added to "edit.\&html"
.IP \(bu 4
a new "preview.\&html" was added
.PD
.PP
If you want to take advantage of this, you'\&ll need to adapt your templates
accordingly.\& The "preview.\&html" template is a mix of "view.\&html" and
"edit.\&html".\&
.PP
There is an optional change to make to copies of \fIupload.\&html\fR if you upload
multiple images at a time.\& Instead of showing just the link to the last upload,
you can now show the link (and the images or links, if you want to) to all the
files uploaded.\& Use like this, for example:
.PP
.nf
.RS 4
Links:<tt>{{range \&.Actual}}<br>![]({{\&.}}){{end}}</tt>
.fi
.RE
.PP
.SS 1.9 (2024)
.PP
There is a change to make to copies of \fIupload.\&html\fR if subdirectories are being
used.\& The \fILast\fR property no longer contains the directory.\& It has to be added
to the template as follows:
.PP
.nf
.RS 4
{{if ne \&.Last ""}}
<p>Previous upload: <a href="/view/{{\&.Dir}}{{\&.Last}}">{{\&.Last}}</a></p>
{{if \&.Image}}
<p><img class="last" src="/view/{{\&.Dir}}{{\&.Last}}"></p>
{{end}}
{{end}}
.fi
.RE
.PP
You can use the \fILast\fR property without a directory to suggest the markup to
use, for example:
.PP
.nf
.RS 4
<p>Use the following for <a href="/view/{{\&.Dir}}{{\&.Today}}">{{\&.Today}}</a>:
<pre>![]({{\&.Last}})</a></pre>
.fi
.RE
.PP
The upload template can use the \fIToday\fR property.\&
.PP
The upload template comes with JavaScript that allows users to paste images or
drag and drop files.\&
.PP
The upload template changed the id for the filename field from `text` to `name`.\&
.PP
The source repository now comes with example templates.\&
.PP
.SS 1.8 (2024)
.PP
No user-visible changes.\& Documentation and code comments got better.\&
.PP
.SS 1.7 (2024)
.PP
Allow upload of multiple files.\& This requires an update to the \fIupload.\&html\fR
template: Add the \fImultiple\fR attribute to the file input element and change the
label from "file" to "files".\&
.PP
Fix orientation of uploaded images.\& JPG and HEIC images have EXIF data telling a
viewer how to orient the image.\& Oddmu now uses this information to rotate the
image correctly before stripping it.\&
.PP
The version command now displays much less information unless given the -full
argument.\&
.PP
.SS 1.6 (2024)
.PP
Add \fIarchive\fR action to serve a zip file.\&
.PP
.SS 1.5 (2024)
.PP
Filtering separate sites in subdirectories via the ODDMU_FILTER environment
variable in order to exclude them from the \fIsearch\fR action.\&
.PP
Add \fIversion\fR subcommand.\&
.PP
Add filesystem watchers to automatically reindex changed pages and reload
changed templates.\&
.PP
When rendering a page, use templates in the same directory, if available.\&
.PP
Delete uploaded files by uploading a file with zero bytes.\&
.PP
.SS 1.4 (2024)
.PP
If stdin is a Unix-domain socket, use that to serve the site.\& Otherwise, allow
specifying a listen address via the ODDMU_ADDRESS environment variable.\&
.PP
.SS 1.3 (2024)
.PP
Add support for resizing HEIC images (and saving them as JPG files).\&
.PP
.SS 1.2 (2023)
.PP
Add \fIlist\fR subcommand.\&
.PP
.SS 1.1 (2023)
.PP
Rewrote most of the README into man pages.\&
.PP
Add fediverse account rendering if ODDMU_WEBFINGER is set.\&
.PP
Add notifications when saving files: adding links to \fIindex\fR, \fIchanges\fR and
\fIhashtag\fR pages.\&
.PP
Add \fIreplace\fR subcommand.\& Add \fImissing\fR subcommand.\& Add \fInotify\fR command.\& Add
\fIstatic\fR command.\&
.PP
Add \fIdiff\fR action.\&
.PP
Add feed generation based on the local links from a page.\&
.PP
Add caching support by considering the If-Modified-Since header in requests and
providing a Last-Modified header in responses.\&
.PP
Handle HEAD requests.\&
.PP
Remove HTML sanitization.\&
.PP
Remove MathJax support from the wiki parser.\& The templates never included the
necessary MathJax JavaScript anyway so the special handling of $ was just an
annoyance.\&
.PP
Drop trigram index and just search all the files.\& This takes much less RAM and
doesn'\&t take too much time even with a few thousand pages.\&
.PP
Add "blog:true" and "blog:false" predicates to search.\&
.PP
Limit search to the current directory tree.\&
.PP
Do not overwrite fresh backups: there must be a 1h break before the backup is
overwritten.\&
.PP
.SS 1.0 (2023)
.PP
Paginate search results and no longer sort search results by score.\&
.PP
.SS 0.9 (2023)
.PP
Add image resizing.\&
.PP
Add wiki links in double square brackets to the parser.\&
.PP
.SS 0.8 (2023)
.PP
Rename files to backups before saving.\&
.PP
Rename the \fIsaveUpload\fR action to \fIdrop\fR.\&
.PP
Add the \fIsearch\fR subcommand.\&
.PP
.SS 0.7 (2023)
.PP
Add \fIupload\fR and \fIsaveUpload\fR action so that one can upload files.\&
.PP
Add \fIhtml\fR subcommand.\&
.PP
.SS 0.6 (2003)
.PP
Add \fIadd\fR and \fIappend\fR action so that one can add to an existing page.\& This is
important for me as editing pages on the phone can be cumbersome but leaving
comments on my own site has always been easy to do.\&
.PP
Serve all existing files, not just text files.\&
.PP
Save an empty page to delete it.\&
.PP
Changed default permissions from 600 to 644 for files and from 700 to 755 for
directories.\&
.PP
Make language detection configurable using an environment variable.\&
.PP
.SS 0.5 (2023)
.PP
Add hyphenation to templates using Peter M.\& Stahl'\&s Lingua library.\&
.PP
.SS 0.4 (2023)
.PP
Create subdirectories as necessary.\&
.PP
.SS 0.3 (2023)
.PP
Add \fIsearch\fR action using Damian Gryski'\&s trigram indexing, with scoring,
highlighting and snippet extraction.\&
.PP
.SS 0.2 (2023)
.PP
Switch to Krzysztof Kowalczyk'\&s Go Markdown fork of Blackfriday to render
Markdown.\& Use Dee'\&s Bluemonday to sanitize HTML.\&
.PP
Switch to GNU Affero GPL 3 license.\&
.PP
Serve text files (.\&txt).\&
.PP
Support serving on any port via the environment variable ODDMU_PORT.\&
.PP
.SS 0.1 (2015)
.PP
A web server that allows editing files in Wiki Creole Matt Self'\&s Cajun library.\&
Supported actions are \fIedit\fR, \fIsave\fR, and \fIview\fR.\&
.PP
.SH SEE ALSO
.PP
\fIoddmu\fR(1)
.PP
.SH AUTHORS
.PP
Maintained by Alex Schroeder <alex@gnu.\&org>.\&
